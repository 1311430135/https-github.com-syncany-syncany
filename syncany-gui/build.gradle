apply plugin: 'application'

mainClassName = "org.syncany.gui.main.MainGUI"

repositories {
    maven {
        url "https://swt-repo.googlecode.com/svn/repo/"
    }
}

String swtJarName;

switch(getOsName()) {
	case 'windows_86':
   		swtJarName = 'win32.win32.x86'; 
   		break;
  	case 'windows_64':
    	swtJarName = 'win32.win32.x86_64' 
    	break
  	case 'linux_86':
    	swtJarName = 'gtk.linux.x86' 
    	break
  	case 'linux_64':
    	swtJarName = 'gtk.linux.x86_64' 
    	break
  	case 'mac_64':
    	swtJarName = 'cocoa.macosx.x86_64'
 		break
  	case 'mac_86':
    	swtJarName = 'cocoa.macosx' 
    	break
  	default:
    	throw new Exception('Unknown OS')
}

dependencies {
	compile			project(':syncany-plugin-gui')
    runtime			project(':syncany-plugin-ftp')
    runtime			project(':syncany-plugin-rest')  
	runtime			project(':syncany-plugin-gui-ftp')
    runtime			project(':syncany-plugin-gui-rest')  
	
    compile			"org.eclipse.swt:org.eclipse.swt.${swtJarName}:4.3"
	compile			"com.google.code.gson:gson:2.2.4"
	compile			"org.java-websocket:Java-WebSocket:1.3.0"
}

task(runGui, dependsOn: 'classes', type: JavaExec) {
	main = "${mainClassName}"
	//SWT need -XStartOnFirstThread to run on OSX
	jvmArgs = [getOsName().startsWith("mac") ? '-XstartOnFirstThread' : '']	
	classpath = sourceSets.main.runtimeClasspath
}